<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Logowanie do Galicyjskie Biuro Brokerskie - portal klienta">
    <meta name="robots" content="noindex, nofollow">
    <title>Logowanie - Galicyjskie Biuro Brokerskie</title>
    <link rel="icon" type="image/png" href="https://cdn.builder.io/api/v1/image/assets%2F06d7d275ef834dcd8a8b9ca830b4009c%2Fdaf4bab5e87b4135a558f67fd6642c2b?format=webp&width=32">
    <link rel="stylesheet" href="styles.css">
<link rel="apple-touch-icon" sizes="180x180" href="/favicon_io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon_io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon_io/favicon-16x16.png">
<link rel="manifest" href="/favicon_io/site.webmanifest">
<link rel="shortcut icon" href="/favicon_io/favicon.ico">
<link rel="icon" sizes="192x192" href="/favicon_io/android-chrome-192x192.png">
<link rel="icon" sizes="512x512" href="/favicon_io/android-chrome-512x512.png">
</head>
<body class="login-page">
    <header>
        <div class="container">
            <a href="index.html" class="logo">
                <img src="Logo.png" alt="Logo Galicyjskie Biuro Brokerskie" class="logo-image">
            </a>
            <div class="header-social" aria-label="Social media">
  <a class="social-link" href="https://www.facebook.com/profile.php?id=61569936570074" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
    <span class="icon icon-facebook"></span>
  </a>
  <a class="social-link" href="https://www.instagram.com/galicyjskie_biuro_brokerske?igsh=c3BkZmNoMWt2ZWwx&amp;utm_source=qr" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
    <span class="icon icon-instagram"></span>
  </a>
</div>
<nav>
                <ul class="menu">
                    <li><a href="index.html">Powrót do strony głównej</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="login-main">
        <div class="login-container">
            <div class="login-card">
                
                <form class="login-form" action="/login" method="POST">
                    <div class="form-group">
                        <label for="email">Adres e-mail</label>
                        <input type="email" id="email" name="email" required autocomplete="email">
                    </div>
                    
                    <div class="form-group">
                        <label for="password">Hasło</label>
                        <input type="password" id="password" name="password" required autocomplete="current-password">
                    </div>
                    
                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="remember" name="remember">
                            Zapamiętaj mnie
                        </label>
                    </div>
                    
                    <button type="submit" class="login-btn-submit">Zaloguj się</button>

                    <div class="form-footer">
                        <button type="button" class="forgot-password-btn" onclick="window.location.href='mailto:gbb@gbb.com.pl?subject=Reset hasła'">Nie pamiętasz hasła?</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>© 2025 Galicyjskie Biuro Brokerskie Sp. z o.o. – Wszelkie prawa zastrzeżone.</p>
        </div>
    </footer>
    <script type="module">
  // ======= [A] Firebase (prawdziwe logowanie) =======
  // 1) W konsoli Firebase utwórz projekt i włącz Email/Hasło w: Authentication → Sign-in method.
  // 2) Uzupełnij poniższą konfigurację.

  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

  const firebaseConfig = {
  apiKey: "AIzaSyBaT_l1T7uZuOpRKoPO5mM-TmSxxJ-RqBE",
  authDomain: "gbb---ubezpieczenia.firebaseapp.com",
  projectId: "gbb---ubezpieczenia",
  storageBucket: "gbb---ubezpieczenia.firebasestorage.app",
  messagingSenderId: "401341596644",
  appId: "1:401341596644:web:c6060f8ab6ae6eb017bdf1",
  measurementId: "G-V259MFTZPW"
};

  let app, auth;
  try {
    app = initializeApp(firebaseConfig);
    auth = getAuth(app);
  } catch (e) {
    console.warn("Firebase nie skonfigurowany – przełączam na tryb demo.", e);
  }

  const form = document.querySelector(".login-form");
  const emailInput = document.getElementById("email");
  const passwordInput = document.getElementById("password");

  const msg = document.createElement("div");
  msg.id = "login-msg";
  msg.setAttribute("role", "status");
  msg.style.marginTop = "12px";
  msg.style.textAlign = "center";
  form.appendChild(msg);

  const setMsg = (text, ok=false) => {
    msg.textContent = text;
    msg.style.color = ok ? "#0a7c2f" : "#8b0000";
  };

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    const email = emailInput.value.trim();
    const password = passwordInput.value;

    setMsg("Logowanie…");

    // Jeżeli Firebase poprawnie zainicjalizowany – użyj go.
    if (auth) {
      try {
        await signInWithEmailAndPassword(auth, email, password);
        setMsg("Zalogowano pomyślnie. Przekierowuję…", true);
        window.location.href = "dashboard.html";
        return;
      } catch (err) {
        console.error(err);
        const map = {
          "auth/invalid-credential": "Nieprawidłowy e‑mail lub hasło.",
          "auth/user-not-found": "Użytkownik nie istnieje.",
          "auth/too-many-requests": "Za dużo prób. Spróbuj później.",
        };
        setMsg(map[err.code] || "Błąd logowania. Spróbuj ponownie.");
      }
    }

    // ======= [B] Tryb demo (fallback) =======
    // DEMO: prosta weryfikacja po stronie klienta. NIE do produkcji.
    const DEMO = { email: "demo@gbb.com.pl", password: "Demo123!" };
    if (email === DEMO.email && password === DEMO.password) {
      localStorage.setItem("gbb_demo_auth", JSON.stringify({ email, ts: Date.now() }));
      setMsg("Zalogowano (demo). Przekierowuję…", true);
      window.location.href = "dashboard.html";
    } else {
      setMsg("Nieprawidłowe dane (demo). Użyj demo@gbb.com.pl / Demo123! lub skonfiguruj Firebase.");
    }
  });

  // Pokaż stan logowania (Firebase)
  if (auth) {
    onAuthStateChanged(auth, (user) => {
      if (user) {
        console.log("Zalogowany jako:", user.email);
      }
    });
  }
</script>
</body>
</html>
